<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ .Title }}</title>
        <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}Tech Lead y Senior Backend Developer con m√°s de 12 a√±os de experiencia en desarrollo de productos y liderazgo de equipos.{{ end }}">
        <meta name="author" content="{{ .Params.author | default "Rebeca M√©ndez Barallobre" }}">
        <meta name="robots" content="index, follow">
        
        <!-- Font preload to avoid FOIT -->
        <link rel="preload" href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" as="style">
        
        <!-- Preconnect to external domains -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preconnect" href="https://cdnjs.cloudflare.com">
        
        <!-- Preload critical resources -->
        <link rel="preload" href="css/style.css" as="style">
        <link rel="preload" href="js/main.js" as="script">
        
        <!-- Critical CSS -->
        <style>
            /* Font fallback to prevent layout shift */
            @font-face {
                font-family: 'Merriweather';
                font-style: normal;
                font-weight: 400;
                font-display: swap;
                src: local('Arial');
            }
            
            :root {
                --primary-color: #000000;
                --accent-color: #333333;
                --link-color: #2980b9;
                --bg-color: #ffffff;
                --border-color: #000;
                --hover-color: #444;
                --header-height: 150px;
                --content-width: 800px;
                --section-spacing: 3rem;
                --subsection-spacing: 2rem;
                --item-spacing: 1.5rem;
            }
            
            /* Set explicit content-box to prevent layout shifts */
            *, *::before, *::after {
                box-sizing: border-box;
            }
            
            body {
                font-family: "Merriweather", Arial, sans-serif;
                line-height: 1.8;
                color: var(--primary-color);
                max-width: var(--content-width);
                margin: 0 auto;
                padding: 3rem;
                background: var(--bg-color);
                min-height: 100vh;
            }
            
            .header {
                text-align: center;
                margin-bottom: 3rem;
                height: var(--header-height);
                display: flex;
                flex-direction: column;
                justify-content: center;
            }
            
            /* Main sections */
            h2 {
                margin-top: 3.5rem !important;
                margin-bottom: var(--subsection-spacing);
                padding-bottom: 0.5rem;
                border-bottom: 2px solid var(--border-color);
                font-size: 1.8rem;
            }

            /* Subsections */
            h3 {
                margin-top: var(--subsection-spacing);
                margin-bottom: var(--item-spacing);
                font-size: 1.4rem;
            }

            /* List elements */
            ul {
                padding-left: 1.2rem;
            }

            li {
                margin-bottom: var(--item-spacing);
                line-height: 1.8;
            }

            /* Text blocks */
            p, ul, li {
                margin-bottom: var(--item-spacing);
                line-height: 1.8;
            }

            /* Quotes and summary */
            blockquote {
                margin: var(--subsection-spacing) 0;
                padding: 1.5rem 2rem;
                background-color: rgba(0, 0, 0, 0.02);
                border-left: 4px solid var(--primary-color);
                border-radius: 0 4px 4px 0;
            }

            /* Main section spacing */
            section, .experience-item, .skills-section {
                margin-bottom: var(--subsection-spacing);
            }

            .experience-item:last-child {
                margin-bottom: 0;
            }

            /* Skills adjustments */
            .skills-section {
                margin-bottom: var(--subsection-spacing);
            }

            /* Highlighted elements spacing */
            .highlight {
                padding: 0.2rem 0.4rem;
                margin: 0 0.2rem;
            }
            
            /* Reserve space for icons and tooltips */
            .ai-icon {
                position: fixed;
                bottom: 1rem;
                right: 1rem;
                width: 3rem;
                height: 3rem;
                background: var(--primary-color);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                z-index: 1000;
                transition: transform 0.3s ease;
                border: 2px solid white;
            }
            
            .ai-tooltip {
                position: fixed;
                bottom: 4rem;
                right: 1rem;
                background: white;
                padding: 1rem;
                border-radius: 8px;
                box-shadow: 0 4px 20px rgba(0,0,0,0.15);
                max-width: calc(100% - 2rem);
                width: 300px;
                min-height: 100px;
                visibility: hidden;
                opacity: 0;
                z-index: 999;
                transition: visibility 0s, opacity 0.3s ease;
            }
            
            .ai-tooltip.visible {
                visibility: visible;
                opacity: 1;
            }
            
            /* Ensure images don't cause layout shifts */
            img {
                aspect-ratio: attr(width) / attr(height);
                contain: layout paint style;
            }
        </style>
        
        <!-- Deferred styles -->
        <link rel="stylesheet" href="css/style.css" media="print" onload="this.media='all'">
        <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
        <noscript>
            <link rel="stylesheet" href="css/style.css">
            <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300;1,400&display=swap" rel="stylesheet">
        </noscript>
        
        <!-- Scripts -->
        <script src="js/main.js" defer></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const aiIcon = document.querySelector('.ai-icon');
                const tooltip = document.getElementById('aiTooltip');
                
                if (aiIcon && tooltip) {
                    aiIcon.addEventListener('click', function(e) {
                        e.stopPropagation();
                        tooltip.classList.toggle('visible');
                    });

                    document.addEventListener('click', function(e) {
                        if (!tooltip.contains(e.target) && !aiIcon.contains(e.target)) {
                            tooltip.classList.remove('visible');
                        }
                    });
                }
            });
        </script>
        
        <!-- Favicon -->
        <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üë©‚Äçüíª</text></svg>">
    </head>
    <body>
        <header class="header">
        </header>

        <main>
            {{- block "main" . }}{{- end }}
        </main>

        <div class="ai-icon">
            <i class="fas fa-robot"></i>
        </div>

        <div class="ai-tooltip" id="aiTooltip">
            {{ with .Site.GetPage "/assistant.md" }}
                {{ .Content }}
            {{ end }}
        </div>
    </body>
</html> 